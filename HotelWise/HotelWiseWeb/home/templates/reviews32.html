<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Page Title</title>
</head>
<body>
    

    <script>
        // Get references to the state and city select elements and the submit button
        const stateSelect = document.getElementById('state');
        const citySelect = document.getElementById('city');
        const submitButton = document.getElementById('submitButton');

        // Define a JavaScript function to update the city options based on the selected state
        function updateCityOptions() {
            const selectedState = stateSelect.value;
            // Make an AJAX request to fetch cities for the selected state
            fetch(`/reviews/get_cities/?state=${selectedState}`)
                .then(response => response.json())
                .then(data => {
                    console.log(data); // Add this line to check the data received
                    // Update city options based on the fetched data
                    citySelect.innerHTML = '<option value="">--Select City--</option>';
                    data.forEach(city => {
                        const option = document.createElement('option');
                        option.value = city; // Set the value to the city name
                        option.textContent = city; // Set the visible text to the city name
                        citySelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Error fetching cities:', error));
        }
        
        

        // Attach event listener to the state select element to update city options
        stateSelect.addEventListener('change', updateCityOptions);

        // Call updateCityOptions initially to handle any pre-selected state or to clear the city options if no state is selected
        updateCityOptions();

        // Attach event listener to the custom "Submit Selection" button for form submission
        submitButton.addEventListener('click', function() {
            const selectedState = stateSelect.value;
            const selectedCity = citySelect.value;
            
            console.log('Selected State:', selectedState);
            console.log('Selected City:', selectedCity);
        
            if (!selectedCity) {
                alert("Please select a city before submitting.");
                return false; // Prevent form submission if no city is selected
            }
        
            // Submit the form using JavaScript (optional)
            // document.getElementById("locationForm").submit(); // Uncomment to submit form using JavaScript
        });
    </script>
</body>
</html>
